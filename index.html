<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Portfolio video — Il mio sito</title>
  <meta name="description" content="Portfolio con player YouTube incorporati (privacy-enhanced)." />
  <style>
    /* Stili semplici e responsivi */
    :root{--bg:#0f1724;--card:#0b1220;--accent:#ff6b6b;--muted:#9aa6b2;--glass: rgba(255,255,255,0.03)}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial; margin:0; background:linear-gradient(180deg,#061025 0%, #08132a 100%); color:#e6eef6; -webkit-font-smoothing:antialiased}
    header{padding:28px 20px; display:flex; gap:16px; align-items:center; justify-content:space-between}
    header h1{font-size:20px; margin:0}
    header p{margin:0; color:var(--muted)}
    .wrap{max-width:1100px; margin:0 auto; padding:20px}

    /* Lista video */
    .grid{display:grid; gap:18px; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); margin-top:20px}
    .card{background:var(--card); border-radius:12px; overflow:hidden; box-shadow:0 8px 30px rgba(2,6,23,0.6); position:relative}
    .thumb{display:block; width:100%; padding:0; border:0; background:none; text-align:center; cursor:pointer}
    .thumb img{display:block; width:100%; height:auto}
    .play{position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); font-size:48px; filter:drop-shadow(0 4px 14px rgba(0,0,0,.6)); color:var(--accent);}
    .meta{padding:12px 14px}
    .meta h3{margin:0 0 6px 0; font-size:15px}
    .meta small{color:var(--muted)}

    /* Form per aggiungere video */
    form#addForm{display:flex; gap:8px; margin-top:18px}
    input#videoInput{flex:1; padding:10px 12px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background:var(--glass); color:inherit}
    button{padding:10px 14px; border-radius:8px; border:0; background:var(--accent); color:#071022; cursor:pointer}

    footer{padding:28px 0; color:var(--muted); font-size:13px}

    @media (max-width:420px){header h1{font-size:16px}}
  </style>
</head>
<body>
  <header class="wrap">
    <div>
      <h1>Portfolio video — Il mio sito</h1>
      <p>Mostra i tuoi video YouTube con player incorporati (privacy-enhanced).</p>
    </div>
    <div style="text-align:right;color:var(--muted)">Sostituisci i video, personalizza colori e testi</div>
  </header>

  <main class="wrap">
    <!-- Form: incolla URL YouTube o solo l'ID e premi "Aggiungi" -->
    <form id="addForm" onsubmit="return false;">
      <input id="videoInput" placeholder="Incolla qui URL YouTube o solo l'ID (es. https://youtu.be/VIDEOID)" />
      <button id="addBtn">Aggiungi</button>
    </form>

    <!-- Contenitore video -->
    <section id="videos" class="grid" aria-live="polite"></section>

    <footer>
      <p>Questo file è una singola pagina statica: basta caricarlo così com'è su GitHub Pages, Netlify o Vercel.
      Per motivi di privacy il player usa il dominio <code>youtube-nocookie.com</code> quando carichi il video.</p>
    </footer>
  </main>

  <script>
    /*
      INFORMAZIONI RAPIDE
      - Sostituisci gli ID in `initialVideos` con i tuoi.
      - Oppure usa il form per incollare un URL YouTube e premere "Aggiungi".
      - Per deploy: carica index.html (e cartella assets se la crei) su GitHub Pages / Netlify / Vercel.

      COME FUNZIONA
      - Per evitare di caricare tutti gli iframe subito, la pagina mostra la thumbnail.
      - Quando clicchi la thumbnail viene creato l'iframe con il player (youtube-nocookie).
    */

    const initialVideos = [
      // Esempio: sostituisci con i tuoi ID (es: "dQw4w9WgXcQ")
      'dQw4w9WgXcQ',
      '3JZ_D3ELwOQ'
    ];

    const container = document.getElementById('videos');
    const form = document.getElementById('addForm');
    const input = document.getElementById('videoInput');

    function extractVideoID(u){
      // supporta: URL lunghi, youtu.be, embed, o solo ID
      if(!u) return '';
      u = u.trim();
      // se è già un id semplice (11+ caratteri alfanumerici - pattern approssimato)
      if(/^[a-zA-Z0-9_-]{10,}$/.test(u)) return u;

      // prova a estrarre dal formato v=ID
      try{
        const url = new URL(u);
        if(url.hostname.includes('youtu')){
          // youtu.be short
          if(url.hostname === 'youtu.be') return url.pathname.slice(1);
          // query 'v='
          const v = url.searchParams.get('v');
          if(v) return v;
          // /embed/ID
          const p = url.pathname.split('/');
          const maybe = p.pop() || p.pop();
          if(maybe && /^[a-zA-Z0-9_-]{10,}$/.test(maybe)) return maybe;
        }
      }catch(e){ /* non è un URL */ }
      return '';
    }

    function createCard(videoId){
      const card = document.createElement('article');
      card.className = 'card';

      const thumbUrl = `https://i.ytimg.com/vi/${videoId}/hqdefault.jpg`;

      card.innerHTML = `
        <button class="thumb" aria-label="Play video" data-id="${videoId}">
          <img src="${thumbUrl}" alt="Thumbnail video">
          <div class="play">▶</div>
        </button>
        <div class="meta">
          <h3>Video ID: ${videoId}</h3>
          <small>Clicca sulla miniatura per caricare il player.</small>
        </div>
      `;

      const btn = card.querySelector('.thumb');
      btn.addEventListener('click', ()=>{
        // Crea l'iframe solo al click
        const iframe = document.createElement('iframe');
        iframe.width = '100%';
        iframe.height = '400';
        // privacy-enhanced mode (no-cookie) e parametri utili
        iframe.src = `https://www.youtube-nocookie.com/embed/${videoId}?rel=0&modestbranding=1`;
        iframe.title = 'YouTube video player';
        iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share';
        iframe.allowFullscreen = true;
        iframe.loading = 'lazy';
        // sostituisci contenuto carta con iframe
        card.innerHTML = '';
        card.appendChild(iframe);
      });

      return card;
    }

    function renderList(list){
      container.innerHTML = '';
      list.forEach(id=>{
        if(!id) return;
        container.appendChild(createCard(id));
      });
    }

    // init
    document.addEventListener('DOMContentLoaded', ()=>{
      renderList(initialVideos);
    });

    // aggiungi video via form
    form.addEventListener('submit', ()=>{
      const raw = input.value;
      const id = extractVideoID(raw);
      if(!id){
        alert('URL o ID non valido. Controlla e riprova.');
        return;
      }
      // aggiungi alla lista (in memoria)
      initialVideos.push(id);
      renderList(initialVideos);
      input.value = '';
    });
  </script>
</body>
</html>
